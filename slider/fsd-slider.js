(()=>{"use strict";const t=function(){function t(){this.observers=[]}return t.prototype.addObserver=function(t){this.observers.push(t)},t.prototype.removeObserver=function(t){this.observers.filter((function(e){return e!==t}))},t.prototype.notifyObservers=function(t,e,i){this.observers.forEach((function(n){n&&"handleEvent"in n&&n.handleEvent(t,e,i)}))},t}(),e={min:0,max:10,from:5,step:1,to:8,isRange:!1,isVertical:!1,hideThumbLabel:!1},i="thumbFrom",n="thumbTo",s="data-value",o=1e-4,r=function(){function t(){}return t.numDigitsAfterDecimal=function(t){return t?(t.toString().split(".")[1]||"").length:0},t.convertFromInputToNumber=function(t){var e=parseFloat(String(t));if(!Number.isNaN(e))return e},t.convertFromInputToBoolean=function(t){return Boolean(t)},t.roundWithStep=function(e,i,n){var s=1;return 0!==i&&(s=1/i),Math.round(+(e-n).toFixed(t.numDigitsAfterDecimal(i))*s)/s+n},t}(),h="fsd-slider",a="fsd-slider__range",l="fsd-slider__range-label",u="fsd-slider__range-label-scale",g="fsd-slider__colored-range",m="fsd-slider__thumb-to",c="fsd-slider__thumb-from",d="fsd-slider__thumb-label",p="fsd-slider__thumb-value",f="fsd-slider_is_vertical",b="fsd-slider__range_is_vertical",v="fsd-slider__colored-range_is_vertical",T="fsd-slider__range-label_is_vertical",L="fsd-slider__thumb-label_is_vertical",y="fsd-slider_element_is_hidden",P=function(){function t(){var t=document.createElement("div"),e=document.createElement("div");this.thumbLabelContainer=t,this.thumbLabelContainer.classList.add(d),this.thumbLabelValue=e,this.thumbLabelValue.classList.add(p),this.thumbLabelContainer.appendChild(this.thumbLabelValue)}return t.prototype.getThumbLabelHTML=function(){return this.thumbLabelContainer},t.prototype.setValueToLabel=function(t){this.thumbLabelValue.innerText=""+t},t.prototype.hideLabel=function(){this.thumbLabelContainer.classList.add(y)},t.prototype.showLabel=function(){this.thumbLabelContainer.classList.remove(y)},t.prototype.setVertical=function(){this.thumbLabelContainer.classList.add(L)},t.prototype.setHorizontal=function(){this.thumbLabelContainer.classList.remove(L)},t}(),x=function(){function t(t){this.thumb=document.createElement("div"),this.thumb.classList.add(t),this.thumbLabel=new P,this.thumbLabelHTML=this.thumbLabel.getThumbLabelHTML(),this.thumb.appendChild(this.thumbLabelHTML)}return t.prototype.getThumbHTML=function(){return this.thumb},t.prototype.getThumbLabelHTML=function(){return this.thumbLabel.getThumbLabelHTML()},t.prototype.setThumbPosition=function(t,e){e?(this.thumb.style.top=t+"%",this.thumb.style.left="-25%"):(this.thumb.style.left=t+"%",this.thumb.style.top="-25%")},t.prototype.setVertical=function(){this.thumbLabel.setVertical()},t.prototype.setHorizontal=function(){this.thumbLabel.setHorizontal()},t.prototype.hideLabel=function(){this.thumbLabel.hideLabel()},t.prototype.showLabel=function(){this.thumbLabel.showLabel()},t.prototype.setValueToLabel=function(t){this.thumbLabel.setValueToLabel(t)},t}(),I=function(){function t(){this.coloredRange=document.createElement("div"),this.coloredRange.classList.add(g)}return t.prototype.getColoredRangeHTML=function(){return this.coloredRange},t.prototype.setColoredRange=function(t,e,i,n){if(t.isRange)if(t.isVertical){var s=Number.parseFloat(i.style.top)-Number.parseFloat(e.style.top)+.5*n+"%";this.coloredRange.style.top=e.style.top,this.coloredRange.style.left="0%",this.coloredRange.style.width="100%",this.coloredRange.style.height=s}else{var o=Number.parseFloat(i.style.left)-Number.parseFloat(e.style.left)+.5*n+"%";this.coloredRange.style.left=e.style.left,this.coloredRange.style.top="0%",this.coloredRange.style.height="100%",this.coloredRange.style.width=o}else t.isRange||(t.isVertical?(s=Number.parseFloat(e.style.top)+.5*n+"%",this.coloredRange.style.top="0%",this.coloredRange.style.width="100%",this.coloredRange.style.height=s):(o=Number.parseFloat(e.style.left)+.5*n+"%",this.coloredRange.style.width=o,this.coloredRange.style.left="0%",this.coloredRange.style.top="0%",this.coloredRange.style.height="100%"))},t}(),w=function(){function t(t){var e=document.createElement("div");e.classList.add(a),this.range=e,this.viewSettings=t,this.coloredRange=new I,this.thumbTo=new x(m),this.thumbFrom=new x(c),this.range.appendChild(this.coloredRange.getColoredRangeHTML()),this.range.appendChild(this.thumbFrom.getThumbHTML())}return t.prototype.getRangeHTML=function(){return this.range},t.prototype.render=function(t){Object.assign(this.viewSettings,JSON.parse(t)),this.viewSettings.isRange?this.range.appendChild(this.thumbTo.getThumbHTML()):this.viewSettings.isRange||this.range.contains(this.thumbTo.getThumbHTML())&&this.range.removeChild(this.thumbTo.getThumbHTML())},t.prototype.setVertical=function(){this.range.classList.add(b),this.coloredRange.getColoredRangeHTML().classList.add(v),this.thumbFrom.setVertical(),this.viewSettings.isRange&&this.thumbTo.setVertical()},t.prototype.setHorizontal=function(){this.range.classList.remove(b),this.coloredRange.getColoredRangeHTML().classList.remove(v),this.thumbFrom.setHorizontal(),this.viewSettings.isRange&&this.thumbTo.setHorizontal()},t.prototype.setColoredRange=function(t){this.coloredRange.setColoredRange(this.viewSettings,this.thumbFrom.getThumbHTML(),this.thumbTo.getThumbHTML(),t)},t.prototype.getThumbFromHTML=function(){return this.thumbFrom.getThumbHTML()},t.prototype.getThumbLabelFromHTML=function(){return this.thumbFrom.getThumbLabelHTML()},t.prototype.getThumbTo=function(){return this.thumbTo.getThumbHTML()},t.prototype.hideLabel=function(){this.thumbFrom.hideLabel(),this.viewSettings.isRange&&this.thumbTo.hideLabel()},t.prototype.showLabel=function(){this.thumbFrom.showLabel(),this.viewSettings.isRange&&this.thumbTo.showLabel()},t.prototype.setValueToLabelThumbFrom=function(t){this.thumbFrom.setValueToLabel(t)},t.prototype.setValueToLabelThumbTo=function(t){this.thumbTo.setValueToLabel(t)},t.prototype.setThumbPositionFrom=function(t,e){this.thumbFrom.setThumbPosition(t,e)},t.prototype.setThumbPositionTo=function(t,e){this.thumbTo.setThumbPosition(t,e)},t.prototype.getThumbWidthInPx=function(){return this.viewSettings.isVertical?this.thumbFrom.getThumbHTML().offsetHeight:this.thumbFrom.getThumbHTML().offsetWidth},t}();var R=function(){return R=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},R.apply(this,arguments)};const S=function(){function t(t){this.labels=[],this.settings=R({},t),this.initComponents()}return t.prototype.render=function(t){this.settings=Object.assign(this.settings,t),this.setMinRange(this.settings.min),this.setMaxRange(this.settings.max)},t.prototype.getRangeLabelHTML=function(){return this.rangeLabelContainer},t.prototype.setMinRange=function(t){this.minLabel.innerText=""+t},t.prototype.setMaxRange=function(t){this.maxLabel.innerText=""+t},t.prototype.getMinRangeHTML=function(){return this.minLabel},t.prototype.initComponents=function(){this.rangeLabelContainer=document.createElement("div"),this.rangeLabelContainer.classList.add(l),this.minLabel=document.createElement("span"),this.minLabel.classList.add(u),this.maxLabel=document.createElement("span"),this.maxLabel.classList.add(u),this.rangeLabelContainer.appendChild(this.minLabel),this.labels.push(this.minLabel);var t=document.createElement("span");t.classList.add(u),this.labels.push(t),this.rangeLabelContainer.appendChild(t),this.rangeLabelContainer.appendChild(this.maxLabel),this.labels.push(this.maxLabel)},t.prototype.setVertical=function(){this.rangeLabelContainer.classList.add(T)},t.prototype.setHorizontal=function(){this.rangeLabelContainer.classList.remove(T)},t.prototype.getLabels=function(){return this.labels},t.prototype.hideLabels=function(){this.rangeLabelContainer.classList.add(y)},t.prototype.showLabels=function(){this.rangeLabelContainer.classList.remove(y)},t}();var F,M=(F=function(t,e){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},F(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}F(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),V=function(){return V=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},V.apply(this,arguments)};const E=function(t){function a(i){var n=t.call(this)||this;if(n.settings=V({},e),!i)throw new Error("root elem of Slider is null!");return n.rootElem=i,n.fromInPx=0,n.toInPx=0,n.initSliderComponents(),n}return M(a,t),a.prototype.render=function(t){this.settings=Object.assign(this.settings,JSON.parse(t)),this.container.classList.add(h),this.container.appendChild(this.range.getRangeHTML()),this.range.render(t),this.rangeLabel.render(JSON.parse(t)),this.container.appendChild(this.rangeLabel.getRangeLabelHTML()),this.rootElem.appendChild(this.container),this.settings.hideThumbLabel?this.range.hideLabel():this.range.showLabel(),this.settings.isVertical?this.setVertical():this.setHorizontal(),this.bindEvents(),this.range.setValueToLabelThumbFrom(this.settings.from),this.range.setThumbPositionFrom(this.convertFromValueToPercent(this.settings.from),this.settings.isVertical),this.settings.isRange&&(this.range.setValueToLabelThumbTo(this.settings.to),this.range.setThumbPositionTo(this.convertFromValueToPercent(this.settings.to),this.settings.isVertical)),this.setLabelsPosition(),this.setColoredRange(),this.calculateThumbPos()},a.prototype.calculateThumbPos=function(){var t=this.settings,e=t.from,i=t.to,n=t.step,s=t.min;this.fromInPx=this.convertFromValueToPx(e),this.settings.isRange?this.toInPx=this.convertFromValueToPx(r.roundWithStep(i,n,s)):this.toInPx=this.getSliderLengthInPx()},a.prototype.initSliderComponents=function(){this.range=new w(this.settings),this.rangeLabel=new S(this.settings),this.container=document.createElement("div")},a.prototype.setLabelsPosition=function(){var t=Math.abs(this.settings.max-this.settings.min)/2+this.settings.min,e=r.roundWithStep(t,this.settings.step,this.settings.min),i=this.getLabels()[0],n=this.getLabels()[1],s=this.getLabels()[2];i.dataset.value=this.settings.min.toString(),s.dataset.value=this.settings.max.toString(),n.dataset.value=e.toString(),n.innerText=e.toString(),n.dataset.value=e.toString(),n.innerText=e.toString(),this.settings.isVertical?(i.style.top=this.getThumbWidthInPercentage()/2-100*i.offsetHeight/this.getSliderLengthInPx()/2+"%",i.style.left="",s.style.top=100-(s.offsetHeight/2+this.getThumbWidthInPx()/2)/this.getSliderLengthInPx()*100+"%",s.style.left="",n.style.top=this.convertFromValueToPercent(e)+this.getThumbWidthInPercentage()/2-100*this.getLabels()[1].offsetHeight/this.getSliderLengthInPx()/2+"%",n.style.left=""):(i.style.left=this.getThumbWidthInPercentage()/2-100*i.offsetWidth/this.getSliderLengthInPx()/2+"%",i.style.top="",s.style.left=100-(s.offsetWidth/2+this.getThumbWidthInPx()/2)/this.getSliderLengthInPx()*100+"%",s.style.top="",n.style.left=this.convertFromValueToPercent(e)+this.getThumbWidthInPercentage()/2-100*n.offsetWidth/this.getSliderLengthInPx()/2+"%",n.style.top="")},a.prototype.bindEvents=function(){var t=this;this.handleRangeClickBinded=this.handleRangeClick.bind(this,"range"),this.initResizeObserver(),this.handleRangeLabelClickBinded=this.handleRangeLabelClick.bind(this),this.getRangeHTML().addEventListener("mousedown",this.handleRangeClickBinded),this.rangeLabel.getLabels().forEach((function(e){return e.addEventListener("click",t.handleRangeLabelClickBinded)}))},a.prototype.initResizeObserver=function(){var t=this;new ResizeObserver((function(){t.range.setValueToLabelThumbFrom(t.settings.from),t.range.setThumbPositionFrom(t.convertFromValueToPercent(t.settings.from),t.settings.isVertical),t.settings.isRange&&(t.range.setValueToLabelThumbTo(t.settings.to),t.range.setThumbPositionTo(t.convertFromValueToPercent(t.settings.to),t.settings.isVertical)),t.setColoredRange(),t.setLabelsPosition(),t.calculateThumbPos()})).observe(this.rootElem)},a.prototype.bindExtraListeners=function(t){this.handleThumbMoveBinded=this.handleThumbMove.bind(this,t),this.removeHandlerBinded=this.removeHandler.bind(this),document.addEventListener("mousemove",this.handleThumbMoveBinded),document.addEventListener("mouseup",this.removeHandlerBinded)},a.prototype.unbindEvents=function(){this.removeHandler(),this.getRangeLabelHTML().removeEventListener("mousedown",this.handleRangeLabelClickBinded),this.getRangeHTML().removeEventListener("mousedown",this.handleRangeClickBinded)},a.prototype.handleRangeLabelClick=function(t){var e=t.target instanceof Element&&t.target.getAttribute(s),o=this.settings,h=o.to,a=o.max,l=o.min,u=o.from,g=o.isRange,m=o.step;if(e){var c=Number(t.target.getAttribute(s)),d=r.roundWithStep(c,m,l);if(g){if(g)if(c>=h)c===a?this.dispatchEvent(this.convertFromValueToPx(c),n):this.dispatchEvent(this.convertFromValueToPx(d),n);else if(c<=u)this.dispatchEvent(this.convertFromValueToPx(d),i);else{var p=Math.abs(h-u)/2;c<=p+u?this.dispatchEvent(this.convertFromValueToPx(d),i):c>p+u&&d<=a&&this.dispatchEvent(this.convertFromValueToPx(d),n)}}else c===a?this.dispatchEvent(this.convertFromValueToPx(c),i):this.dispatchEvent(this.convertFromValueToPx(d),i)}this.setColoredRange(),this.calculateThumbPos()},a.prototype.handleRangeClick=function(t,e){var s=this.settings,o=s.isRange,r=s.isVertical;if(e instanceof MouseEvent){var h=void 0,a="",l=this.getSliderLengthInPx()-this.getThumbWidthInPx();if((h=r?e.clientY-this.getRangeHTML().getBoundingClientRect().top-this.getThumbWidthInPx()/2:e.clientX-this.getRangeHTML().getBoundingClientRect().left-this.getThumbWidthInPx()/2)>l&&(h=l),h<0&&(h=0),o){var u=h<this.fromInPx,g=h>this.toInPx,m=h>=this.fromInPx&&h<=this.toInPx;if(u)a=i,Math.abs(h-this.getStepInPx())<=this.fromInPx&&this.setFromInPx("-",h);else if(g)a=n,h+this.getStepInPx()>this.toInPx&&(h>=l?this.dispatchEvent(h,n):this.setToInPx("+",h));else if(m){var c=(this.toInPx-this.fromInPx)/2;h<=c+this.fromInPx?(a=i,this.setFromInPx("+",h)):h>c+this.fromInPx&&(a=n,this.setToInPx("-",h))}}else a=i,h+this.getThumbWidthInPx()/2<this.fromInPx?this.setFromInPx("-",h):h+this.getThumbWidthInPx()/2>this.fromInPx&&this.setFromInPx("+",h);"range"===t&&this.bindExtraListeners(a)}},a.prototype.handleThumbMove=function(t,e){var s,o=this.getSliderLengthInPx()-this.getThumbWidthInPx();e instanceof MouseEvent&&((s=this.settings.isVertical?e.clientY-this.getRangeHTML().getBoundingClientRect().top-this.getThumbWidthInPx()/2:e.clientX-this.getRangeHTML().getBoundingClientRect().left-this.getThumbWidthInPx()/2)<0&&(s=0),s>=o&&(s=o),t===i?s<this.fromInPx?this.setFromInPx("-",s):this.setFromInPx("+",s):t===n&&(s>this.toInPx?this.setToInPx("+",s):this.setToInPx("-",s)))},a.prototype.setFromInPx=function(t,e){var n=0,s=this.getSliderLengthInPx()-this.getThumbWidthInPx();n="+"===t?this.fromInPx+this.roundPos(this.fromInPx,e):this.fromInPx-this.roundPos(this.fromInPx,e),Math.abs(this.toInPx-n)<o&&(n=this.toInPx-this.getStepInPx()),n<0&&(n=0),n>this.toInPx&&this.settings.isRange&&(n=this.toInPx-this.getStepInPx()),n<s&&e>=s&&!this.settings.isRange?this.dispatchEvent(e,i):(this.fromInPx=n,this.dispatchEvent(this.fromInPx,i))},a.prototype.setToInPx=function(t,e){var i,s=this.getSliderLengthInPx()-this.getThumbWidthInPx();i="+"===t?this.toInPx+this.roundPos(this.toInPx,e):this.toInPx-this.roundPos(this.toInPx,e),Math.abs(this.fromInPx-i)<o&&(i=this.fromInPx+this.getStepInPx()),i<this.fromInPx&&(i=this.fromInPx+this.getStepInPx()),i<s&&e>=s?this.dispatchEvent(e,n):(this.toInPx=i,this.dispatchEvent(this.toInPx,n))},a.prototype.roundPos=function(t,e){return 0===e?t:+(Math.round(Math.abs(t-e)/this.getStepInPx())*this.getStepInPx()).toFixed(20)},a.prototype.removeHandler=function(){document.removeEventListener("mousemove",this.handleThumbMoveBinded),document.removeEventListener("mouseup",this.removeHandlerBinded)},a.prototype.convertFromPxToPercent=function(t){if(t<0)return 0;var e=t/this.getSliderLengthInPx()*100;return e>100-this.getThumbWidthInPercentage()?100-this.getThumbWidthInPercentage():+e.toFixed(20)},a.prototype.convertFromValueToPx=function(t){var e=Math.abs(t-this.settings.min)/Math.abs(this.settings.max-this.settings.min)*(this.getSliderLengthInPx()-this.getThumbWidthInPx());return e<0?0:+e.toFixed(20)},a.prototype.convertFromValueToPercent=function(t){var e=(100-this.getThumbWidthInPercentage())/Math.abs(this.settings.max-this.settings.min)*Math.abs(t-this.settings.min);return e>100-this.getThumbWidthInPercentage()?100-this.getThumbWidthInPercentage():e<0?0:+e.toFixed(20)},a.prototype.getThumbWidthInPercentage=function(){return this.settings.isVertical?this.getThumbFromHTML().offsetHeight/this.getSliderLengthInPx()*100:this.getThumbFromHTML().offsetWidth/this.getSliderLengthInPx()*100},a.prototype.getSliderLengthInPx=function(){return this.settings.isVertical?this.getRangeHTML().offsetHeight:this.getRangeHTML().offsetWidth},a.prototype.dispatchEvent=function(t,e){var i=this.convertFromPxToPercent(t);"thumbFrom"===e?(this.range.setThumbPositionFrom(i,this.settings.isVertical),this.notifyObservers(4,JSON.stringify({from:i}),0)):(this.range.setThumbPositionTo(i,this.settings.isVertical),this.notifyObservers(5,JSON.stringify({to:i}),0)),this.setColoredRange()},a.prototype.getRangeHTML=function(){return this.range.getRangeHTML()},a.prototype.setValueToLabelThumbFrom=function(t){this.range.setValueToLabelThumbFrom(t),this.settings.from=t},a.prototype.setValueToLabelThumbTo=function(t){this.range.setValueToLabelThumbTo(t),this.settings.to=t},a.prototype.getRangeLabelHTML=function(){return this.rangeLabel.getRangeLabelHTML()},a.prototype.getThumbFromHTML=function(){return this.range.getThumbFromHTML()},a.prototype.getMinRangeHTML=function(){return this.rangeLabel.getMinRangeHTML()},a.prototype.setVertical=function(){this.unbindEvents(),this.container.classList.add(f),this.range.setVertical(),this.rangeLabel.setVertical()},a.prototype.setHorizontal=function(){this.unbindEvents(),this.container.classList.remove(f),this.range.setHorizontal(),this.rangeLabel.setHorizontal()},a.prototype.setColoredRange=function(){this.range.setColoredRange(this.getThumbWidthInPercentage())},a.prototype.getThumbWidthInPx=function(){return this.range.getThumbWidthInPx()},a.prototype.getStepInPx=function(){return+((this.getSliderLengthInPx()-this.getThumbWidthInPx())/Math.abs((this.settings.max-this.settings.min)/this.settings.step)).toFixed(20)},a.prototype.getThumbLabelFrom=function(){return this.range.getThumbLabelFromHTML()},a.prototype.getLabels=function(){return this.rangeLabel.getLabels()},a}(t);var H=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_=function(){return _=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},_.apply(this,arguments)};const O=function(t){function i(i){var n=t.call(this)||this;if(n.viewSettings=_({},e),!i)throw new Error("root elem of Slider is null!");return n.rootElem=i,n.slider=new E(n.rootElem),n.slider.addObserver(n),n}return H(i,t),i.prototype.handleEvent=function(t,e){this.notifyObservers(t,e,this.getThumbWidthInPercentage())},i.prototype.render=function(t){this.slider.render(JSON.stringify(t))},i.prototype.refreshView=function(t,e){0===t||1===t?(this.updateViewSettings(e),this.render(this.viewSettings)):2===t?this.slider.setValueToLabelThumbFrom(e.from):3===t&&this.slider.setValueToLabelThumbTo(void 0!==e.to?e.to:e.from)},i.prototype.getSlider=function(){return this.slider},i.prototype.getThumbWidthInPercentage=function(){return this.slider.getThumbWidthInPercentage()},i.prototype.updateViewSettings=function(t){this.viewSettings=Object.assign(this.viewSettings,t)},i}(t);var C=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),W=function(){return W=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},W.apply(this,arguments)};const N=function(t){function i(i){var n=t.call(this)||this;return n.settings=e,n.setSettings(i),n}return C(i,t),i.prototype.setSettings=function(t){if(void 0!==t){var e=t.max>t.min,i=!t.isRange||t.to>t.from,n=t.from>t.min&&t.from<t.max,s=!t.isRange||t.to<t.max,o=Math.abs(t.max-t.min)>t.step&&t.step>0;if(!(e&&i&&n&&s&&o))throw new Error("settings is not valid");this.settings=W({},t)}},i.prototype.getSettings=function(){return JSON.stringify(this.settings)},i.prototype.updateSettings=function(t){this.validateSettings(t),this.notifyObservers(1,this.getSettings(),0)},i.prototype.setFrom=function(t,e){var i=this.convertFromPercentToValue(t,e);i>this.settings.max?this.settings.from=this.settings.max:i<this.settings.min?this.settings.from=this.settings.min:this.settings.from=i},i.prototype.setTo=function(t,e){var i=this.convertFromPercentToValue(t,e);i>=this.settings.max?this.settings.to=this.settings.max:i<=this.settings.from?this.settings.to=this.settings.from:this.settings.to=i},i.prototype.validateSettings=function(t){var e=r.convertFromInputToNumber(t.min),i=r.convertFromInputToNumber(t.max),n=r.convertFromInputToNumber(t.from),s=r.convertFromInputToNumber(t.to),o=r.convertFromInputToNumber(t.step),h=r.convertFromInputToBoolean(t.isVertical),a=r.convertFromInputToBoolean(t.hideThumbLabel),l=r.convertFromInputToBoolean(t.isRange);this.validateMin(e,i),this.validateMax(i),this.validateFrom(n),this.validateTo(s),this.validateStep(o),this.settings.isVertical=h,this.settings.hideThumbLabel=a,this.validateRange(l)},i.prototype.validateMin=function(t,e){if(void 0!==t&&void 0!==e&&Math.abs(e-t)<this.settings.step)throw new Error("difference between min and max more than step");if(void 0!==t){if(t>this.settings.from)throw new Error("min value more than from value");this.settings.min=t}},i.prototype.validateMax=function(t){if(void 0!==t){var e=this.settings.isRange&&t<this.settings.to,i=!this.settings.isRange&&t<this.settings.from;if(e)throw new Error("min value more than to value");if(i)throw new Error("min value more than from value");this.settings.max=t}},i.prototype.validateFrom=function(t){var e=void 0!==t&&!this.settings.isRange,i=void 0!==t&&this.settings.isRange;if(e){if(t>this.settings.max)throw new Error("from more than max");if(t<this.settings.min)throw new Error("from less than min");this.settings.from=t}if(i){if(t>this.settings.to)throw new Error("from more than to");if(t<this.settings.min)throw new Error("from less than min");this.settings.from=t}},i.prototype.validateTo=function(t){if(void 0!==t&&this.settings.isRange){if(t<this.settings.from)throw new Error("to less than from");if(t>this.settings.max)throw new Error("to more than max");this.settings.to=t}},i.prototype.validateStep=function(t){var e=this.settings,i=e.min,n=e.max,s=e.step;if(void 0!==t){if(t<0)throw new Error("step must be positive");if(0===t)throw new Error("step must not be zero");if(t>Math.abs(n-i))throw new Error("step must be more than difference between max and min");s!==t&&(this.settings.step=t,this.settings.from=i,this.settings.from+this.settings.step>=n?this.settings.to=n:this.settings.to=this.settings.from+this.settings.step)}},i.prototype.validateRange=function(t){var e=this.settings,i=e.min,n=e.max,s=e.step,o=e.isRange,h=e.to,a=e.from;void 0!==t&&(o||(this.settings.to=a+s>n?n:+Math.round(a+s).toFixed(r.numDigitsAfterDecimal(s))),this.settings.isRange=t,a>=h&&(this.settings.from=i))},i.prototype.convertFromPercentToValue=function(t,e){var i=this.settings,n=i.min,s=i.max,o=i.step;if(t<=0)return n;if(t>=100-e)return s;var h=1;0!==o&&(h=1/o);var a=Math.abs(s-n),l=Math.round(+(a*t/(100-e)).toFixed(r.numDigitsAfterDecimal(o))*h)/h+n;return l<n?n:l>s?s:l},i}(t);var j=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const B=function(t){function e(e,i){var n=t.call(this)||this;return n.view=e,n.model=i,n}return j(e,t),e.prototype.handleEvent=function(t,e,i){1===t?(this.view.refreshView(1,JSON.parse(e)),this.notifyObservers(1,this.model.getSettings(),i)):4===t?(this.model.setFrom(JSON.parse(e).from,i),this.view.refreshView(2,JSON.parse(this.model.getSettings())),this.notifyObservers(1,this.model.getSettings(),i)):5===t&&(this.model.setTo(JSON.parse(e).to,i),this.view.refreshView(3,JSON.parse(this.model.getSettings())),this.notifyObservers(1,this.model.getSettings(),i))},e.prototype.initialize=function(){this.view.refreshView(0,JSON.parse(this.model.getSettings())),this.notifyObservers(1,this.model.getSettings(),0)},e.prototype.update=function(t){this.model.updateSettings(t)},e}(t);!function(t){const e=function(t,e,i){const n=new N(e),s=new O(t);this.presenter=new B(s,n),n.addObserver(this.presenter),s.addObserver(this.presenter),this.presenter.addObserver(i),this.presenter.initialize()};e.prototype={update(t){this.presenter.update(t)}},t.fn.fsdSlider=function(i,n){return this.each((function(){t.data(this,"fsd-slider")||t.data(this,"fsd-slider",new e(this,i,n))}))}}(jQuery)})();